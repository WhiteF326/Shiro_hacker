<!DOCTYPE html>
<html>

<head>
  <script id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async defer></script>
  <link rel="stylesheet" href="header.css" type="text.css">
  <link rel="stylesheet" href="https://unpkg.com/sakura.css/css/sakura.css" type="text/css">
  <link rel="shortcut icon" href="materials/1LTxsErZ_400x400.ico" id="fav">
  <title>Shiro_hacker</title>
</head>

<style>
  .MathJax{
    text-align: left !important;
  }
</style>

<body>  

  <script type="module">
    import { fetchJSON } from "https://js.sabae.cc/fetchJSON.js";

    function makeDate(dayString) {
      const retobj = new Date();
      retobj.setUTCFullYear(parseInt(dayString.split(" ")[0].split("-")[0]));
      retobj.setUTCMonth(parseInt(dayString.split(" ")[0].split("-")[1]) - 1);
      retobj.setUTCDate(parseInt(dayString.split(" ")[0].split("-")[2]));
      retobj.setUTCHours(parseInt(dayString.split(" ")[1].split(":")[0]));
      retobj.setUTCMinutes(parseInt(dayString.split(" ")[1].split(":")[1]));
      retobj.setUTCSeconds(parseInt(dayString.split(" ")[1].split(":")[2]));
      return retobj
    }

    window.onload = async () => {
      // 言語一覧のリストボックスを作成
      const languagesListText = await fetchJSON("api/languages", {});
      const languagesList = JSON.parse(languagesListText);
      const languagesBox = document.getElementById("language");
      languagesList.forEach(eachLanguage => {
        const eachLanguageOption = document.createElement("option");
        eachLanguageOption.value = eachLanguage.id;
        eachLanguageOption.innerText = eachLanguage.name;
        languagesBox.appendChild(eachLanguageOption);
      });
      // 言語の変更時に変更内容をローカルに保存する

      // source 高さの自動調整
      document.getElementById("source").addEventListener("input", () => autoHeightAdjust());
      // チェックボックスの値変更時にも高さの自動調整
      document.getElementById("autoHeight").addEventListener("change", () => autoHeightAdjust());
      // source上にマウスがある時ホイール操作を補足する
      window.addEventListener("mousewheel", e => {
        if(document.elementFromPoint(e.clientX, e.clientY) !== null){
          if(document.elementFromPoint(e.clientX, e.clientY).id == "source"){
            const targetTextArea = document.getElementById("source");
            const lineHeight = parseInt(getComputedStyle(targetTextArea, null).getPropertyValue("line-height"));
            e.preventDefault();
            targetTextArea.scrollTo(0, lineHeight * (e.deltaY / 125));
          }
        }
        // console.log(e.deltaY / 125);
      }, {passive: false});
    }

    // ページ遷移
    function moveTo(url, prm) {
      const contestForm = document.getElementById(url);
      for (let key in prm) document.getElementById(key).setAttribute("value", prm[key]);
      contestForm.submit();
    }

    // 速度の自動調整
    function autoHeightAdjust(){
      const targetTextArea = document.getElementById("source");
      if(document.getElementById("autoHeight").checked){
        const lineHeight = parseInt(getComputedStyle(targetTextArea, null).getPropertyValue("line-height"));
        const lineCount = Math.max(targetTextArea.value.split("\n").length, 10);
        console.log(lineCount);
        targetTextArea.style.height = (lineHeight * lineCount + 14) + "px";
      }else{
        targetTextArea.style.height = "134px";
      }
    }
  </script>

  <span>
    <span style="display: inline-block;">
      <h6>Everyone to be enforced.</h6>
      <h3>Shiro_hacker</h3>
    </span>
    <span style="display: inline-block; width: 20%;"></span>
    <span style="display: inline-block;">
      <p>Contact: <a href="mailto:lume1a326.leno@gmail.com">lume1a326.leno@gmail.com</a></p>
      <p>Twitter: <a href="https://twitter.com/shiroha_F14" target="_blank">@shiroha_F14</a></p>
    </span>
  </span>
  <hr>
  <!-- <video src="materials/Banner.mp4" autoplay loop></video> -->

  <div style="display: block; margin-top: 20px;">
    <span>
      <h2 style="display: inline;" id="problemName"></h2>
    </span>
    <span>
      <h4 style="display: inline;" id="limits"></h4>
    </span>
    <span>
      <h4 style="display: inline;" id="score"></h4>
    </span>
  </div>

  <div>
    <span id="problemText">
      <h3>問題文</h3>
      <!-- ここに問題文 -->
    </span>
    <span id="condition">
      <h3>制約</h3>
      <!-- ここに制約 -->
    </span>
  </div>

  <hr>
  <div>
    <span id="input">
      <h3>入力</h3>
      入力は以下の形式で標準入力から与えられます。
      <!-- \[
      test
      \] -->
    </span>
    <span id="input">
      <h3>出力</h3>
      <!-- ここに出力形式 -->
    </span>
  </div>

  <hr>
  <div>
    <!-- <span id="samples">
      ここにサンプルを作成
    </span> -->
  </div>

  <hr>
  <div>
    <h4>言語</h4>
    <select id="language"></select>
    <textarea id="source" style="line-height: 12px; height: 134px; overflow: hidden;"></textarea>
    <input type="checkbox" id="autoHeight">高さの自動調整<br>
    <button id="submitSource">提出</button>
  </div>

  <!-- <div style="display: none;">
    <form id="problemForm" action="problem.html" method="GET">
      <input name="fileName" type="text" id="problemFormFileName">
      <button type="submit"></button>
    </form>
  </div> -->

</body>

<script>
    //
</script>

</html>